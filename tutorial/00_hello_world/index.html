<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    

    <title>Hello World | Regent</title>
    
    <meta name="author" content="Stanford University">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet" type="text/css" media="all">
    <link href="/css/syntax.css" rel="stylesheet" type="text/css" media="all">

    <!-- Fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->
  </head>
  <body>

    <header class="navbar navbar-static-top rg-nav" id="top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".rg-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">Regent</a>
    </div>
    <nav class="collapse navbar-collapse rg-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        
          
            
            
            
            <li class="">
              <a href="/install">Install</a>
            </li>
            
          
        
          
            
            
            
            <li class="">
              <a href="/tutorial">Tutorial</a>
            </li>
            
          
        
          
            
            
            
            <li class="">
              <a href="/reference">Reference</a>
            </li>
            
          
        
          
            
            
            
            <li class="">
              <a href="/resources">Resources</a>
            </li>
            
          
        
          
            <li>
              <a href="http://legion.stanford.edu/publications">Publications</a>
            </li>
          
        
      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/StanfordLegion/legion/tree/master/language">GitHub</a></li>
        <li><a href="/about">About</a></li>
      </ul>
    </nav>
  </div>
</header>


    <div class="container with-img-responsive">
  <div class="row">
    <div class="col-md-12">

      
        <h1 class="page-header">
          
            Hello World

          
          
        </h1>
      

      <p>No tutorial would be complete without a Hello World example. Below is
the source code for Hello World in Regent. The source for this and
other tutorials can also be found in the <a href="https://github.com/StanfordLegion/legion/tree/master/tutorial">GitHub
repository</a>.</p>

<figure class="highlight"><pre><code class="language-regent" data-lang="regent"><span class="k">import</span> <span class="s2">"regent"</span>

<span class="kd">local</span> <span class="n">c</span> <span class="o">=</span> <span class="n">terralib</span><span class="p">.</span><span class="n">includec</span><span class="p">(</span><span class="s2">"stdio.h"</span><span class="p">)</span>

<span class="k">task</span> <span class="nf">hello_world</span><span class="p">()</span>
  <span class="n">c</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s2">"Hello World!\n"</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">task</span> <span class="nf">main</span><span class="p">()</span>
  <span class="n">hello_world</span><span class="p">()</span>
<span class="k">end</span>
<span class="n">regentlib</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">main</span><span class="p">)</span></code></pre></figure>

<h2 id="preamble">Preamble</h2>

<p>Regent is an embedded language. The outermost level of the source code
is a <a href="https://www.lua.org/">Lua script</a>. <em>Two</em> languages are embedded
inside this context: <a href="http://terralang.org/">Terra</a> and Regent
itself. Each language provides special keywords (e.g. <code class="highlighter-rouge">task</code>) which
trigger execution of the compiler. First, though, Regent needs to
register its language definition so that these keywords available to
the program.</p>

<p>In order to load this language definition, every Regent program starts
with the following line.</p>

<figure class="highlight"><pre><code class="language-regent" data-lang="regent"><span class="k">import</span> <span class="s2">"regent"</span></code></pre></figure>

<p>(If you forget this line, you will typically see some obscure parser
errors, as Lua attempts to interpret Regent keywords as Lua variable
names.)</p>

<h2 id="lua-code">Lua Code</h2>

<p>The script executes top-to-bottom in Lua. From the perspective of
Regent, this is happening at compile time, similar to the execution of
templates in C++. However, Lua is a full-featured programming
language, making powerful metaprogramming possible.</p>

<p>For example, the line below parses the C header file <code class="highlighter-rouge">stdio.h</code> and
stores the result into a Lua variable. (So <code class="highlighter-rouge">printf</code> can be accessed as
<code class="highlighter-rouge">c.printf</code>.) This makes it easy to interact with arbitrary C code.</p>

<figure class="highlight"><pre><code class="language-regent" data-lang="regent"><span class="kd">local</span> <span class="n">c</span> <span class="o">=</span> <span class="n">terralib</span><span class="p">.</span><span class="n">includec</span><span class="p">(</span><span class="s2">"stdio.h"</span><span class="p">)</span></code></pre></figure>

<h2 id="hello-world-task">Hello World Task</h2>

<p>Next execution hits the definition of the hello world task
itself. Conceptually, execution of the task definition functions to
invoke the Regent compiler on the source code of the task. That is,
after the following code executes, there will be a new Lua global
variable <code class="highlighter-rouge">hello_world</code> which points to a task object (corresponding to
the source code below).</p>

<p>The task itself wonâ€™t run until we star the Legion runtime. Remember:
the script executes <em>at compile time</em>. But this feature makes it
possible to perform powerful
<a href="/reference#metaprogramming">metaprogramming</a> on Regent code.</p>

<figure class="highlight"><pre><code class="language-regent" data-lang="regent"><span class="k">task</span> <span class="nf">hello_world</span><span class="p">()</span>
  <span class="n">c</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s2">"Hello World!\n"</span><span class="p">)</span>
<span class="k">end</span></code></pre></figure>

<h2 id="main-task">Main Task</h2>

<p>After this, we define the main task. The main task, like <code class="highlighter-rouge">main</code> in
many languages, takes no arguments and produces no result. (Unlike
many languages, the name <code class="highlighter-rouge">main</code> is just a convention in Regent.)</p>

<p>The main task will invoke <code class="highlighter-rouge">hello_world</code> to produce the output message.</p>

<figure class="highlight"><pre><code class="language-regent" data-lang="regent"><span class="k">task</span> <span class="nf">main</span><span class="p">()</span>
  <span class="n">hello_world</span><span class="p">()</span>
<span class="k">end</span></code></pre></figure>

<h2 id="starting-the-runtime">Starting the Runtime</h2>

<p>Finally, at the end of the file, we invoke the Legion runtime. This
kicks off execution of the main task (and subsequent execution of the
rest of the program).</p>

<p>The <code class="highlighter-rouge">start</code> call <em>does not return</em>. Furthermore, the Lua execution
environment used to compile the Regent program is also unavailable
after this function is called. So complete any Lua programming prior
to calling this function.</p>

<figure class="highlight"><pre><code class="language-regent" data-lang="regent"><span class="n">regentlib</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">main</span><span class="p">)</span></code></pre></figure>


    </div>
  </div>
</div>


    <footer class="rg-footer" role="contentinfo">
  <div class="container">
    <p>&copy; 2020 Stanford University.</p>
    <p>Powered by <a href="http://jekyllrb.com/">Jekyll</a> and <a href="http://getbootstrap.com/">Bootstrap</a>.</p>

    <ul class="rg-footer-links muted">
      <li><a href="/">Home</a></li>
      <li>&middot;</li>
      
        
          <li><a href="/install">Install</a></li>
          <li>&middot;</li>
        
      
        
          <li><a href="/tutorial">Tutorial</a></li>
          <li>&middot;</li>
        
      
        
          <li><a href="/reference">Reference</a></li>
          <li>&middot;</li>
        
      
        
          <li><a href="/resources">Resources</a></li>
          <li>&middot;</li>
        
      
        
          <li><a href="http://legion.stanford.edu/publications">Publications</a></li>
          <li>&middot;</li>
        
      
      <li><a href="https://github.com/StanfordLegion/legion/tree/master/language">GitHub</a></li>
      <li>&middot;</li>
      <li><a href="/about">About</a></li>
    </ul>
  </div>
</footer>


    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-71475406-1', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>
